<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kusanagi - Local RAG AI</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#193549',   // Main content dark blue
                        'secondary': '#002240', // Sidebar darker blue
                        'tertiary': '#25435A',   // Input fields
                        'accent': '#ffab40',    // Orange/Yellow accent
                        'accent-fg': '#002240', // Text on accent
                        'fg-primary': '#FFFFFF',
                        'fg-secondary': '#97B1C2', // Muted text
                    }
                }
            }
        }
    </script>
</head>
<body class="h-full bg-primary text-fg-primary font-sans antialiased overflow-hidden">
    <div class="flex h-full max-h-screen">
        
        <!-- === Sidebar === -->
        <aside class="w-80 flex-shrink-0 bg-secondary flex flex-col p-5">
            <!-- Header -->
            <div class="flex items-center space-x-3 mb-5 px-1">
                <div class="p-2 bg-accent rounded-lg">
                    <!-- Kusanagi/Book Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-accent-fg">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                    </svg>                      
                </div>
                <div>
                    <h1 class="text-xl font-bold text-accent">Kusanagi</h1>
                    <p class="text-xs text-fg-secondary">Local RAG AI Assistant</p>
                </div>
            </div>

            <!-- Context Lists -->
            <div class="flex-grow flex flex-col overflow-y-hidden space-y-4">
                <!-- General Chats -->
                <div class="flex flex-col h-1/3">
                    <h2 class="text-sm font-semibold text-fg-secondary uppercase tracking-wide mb-2 px-1">General Chats</h2>
                    <div class="flex-grow bg-tertiary p-2 rounded-lg overflow-y-auto space-y-1">
                        <div class="listbox-item p-3 rounded-md cursor-pointer hover:bg-primary">
                            <h3 class="font-semibold text-fg-primary truncate">Chat 1: Brainstorming</h3>
                            <p class="text-sm text-fg-secondary">Last message: ...</p>
                        </div>
                    </div>
                </div>

                <!-- Loaded Documents -->
                <div class="flex flex-col flex-grow">
                    <h2 class="text-sm font-semibold text-fg-secondary uppercase tracking-wide mb-2 px-1">Loaded Documents</h2>
                    <button class="w-full bg-accent text-accent-fg font-bold py-2 px-4 rounded-lg mb-2 hover:bg-yellow-400 transition duration-200 text-sm">
                        + Upload New Document
                    </button>
                    <div class="flex-grow bg-tertiary p-2 rounded-lg overflow-y-auto space-y-1">
                        <!-- Active Document -->
                        <div class="listbox-item active p-3 rounded-md cursor-pointer border border-accent bg-primary">
                            <h3 class="font-semibold text-fg-primary truncate">History_of_Science_101.pdf</h3>
                            <p class="text-sm text-fg-secondary">124 Pages | 42 chunks</p>
                        </div>
                        <!-- Inactive Documents -->
                        <div class="listbox-item p-3 rounded-md cursor-pointer hover:bg-primary">
                            <h3 class="font-semibold text-fg-primary truncate">Intro_to_Physics_Lab.pdf</h3>
                            <p class="text-sm text-fg-secondary">38 Pages | 12 chunks</p>
                        </div>
                        <div class="listbox-item p-3 rounded-md cursor-pointer hover:bg-primary">
                            <h3 class="font-semibold text-fg-primary truncate">Student_Essays_Batch_1.pdf</h3>
                            <p class="text-sm text-fg-secondary">52 Pages | 20 chunks</p>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- === Main Chat Area === -->
        <main class="flex-1 flex flex-col max-h-screen">
            <!-- Top Bar -->
            <header class="flex-shrink-0 bg-primary border-b border-tertiary flex justify-between items-center p-4">
                <h2 id="chat-title" class="text-lg font-semibold">History_of_Science_101.pdf</h2>
                <div class="text-xs text-fg-secondary flex items-center space-x-3">
                    <span id="status-text" class="text-green-400">‚óè Connected</span>
                    <span>|</span>
                    <span>RAM: 25%</span>
                    <span>|</span>
                    <span>qwen:1.8b-chat</span>
                </div>
            </header>

            <!-- Chat History -->
            <div id="chat-history" class="flex-grow p-6 overflow-y-auto space-y-6">
                <!-- Mockup of an AI greeting -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 w-10 h-10 bg-tertiary rounded-full flex items-center justify-center font-bold text-accent">AI</div>
                    <div class="bg-tertiary p-4 rounded-lg max-w-2xl">
                        <p class="font-bold text-accent mb-1">Kusanagi</p>
                        <p>Document "History_of_Science_101.pdf" is loaded. How can I help you analyze it today?</p>
                    </div>
                </div>
            </div>

            <!-- Jutsu Arsenal (Tool Bar) -->
            <div class="flex-shrink-0 bg-tertiary p-3 mx-6 mb-2 rounded-lg">
                <div class="flex items-center space-x-2">
                    <button id="btn-sage-mode" class="bg-primary text-accent py-1 px-3 rounded-md text-sm hover:bg-gray-700 transition font-bold">Sage Mode (ON)</button>
                    <span class="border-l border-gray-600 h-5"></span>
                    <button id="btn-kage-summit" class="bg-primary text-fg-secondary py-1 px-3 rounded-md text-sm hover:bg-gray-700 transition">Kage Summit</button>
                    <button class="bg-primary text-fg-secondary py-1 px-3 rounded-md text-sm hover:bg-gray-700 transition">Summarize Doc</button>
                    <button class="bg-primary text-fg-secondary py-1 px-3 rounded-md text-sm hover:bg-gray-700 transition">Explain Concept</button>
                    <button class="bg-primary text-fg-secondary py-1 px-3 rounded-md text-sm hover:bg-gray-700 transition">Generate Questions</button>
                </div>
            </div>

            <!-- Input Bar -->
            <footer class="flex-shrink-0 p-6 pt-0">
                <div class="flex bg-tertiary rounded-lg p-2">
                    <input id="chat-input" type="text" placeholder="Ask a question or request a review..." class="w-full bg-transparent p-3 text-fg-primary placeholder-fg-secondary focus:outline-none">
                    <button id="send-button" class="bg-accent text-accent-fg rounded-md p-3 ml-2 hover:bg-yellow-400 transition duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.875L6 12z" />
                        </svg>
                    </button>
                </div>
            </footer>
        </main>
    </div>

    <!-- Custom JavaScript -->
    <script src="static/script.js"></script>
</body>
</html>